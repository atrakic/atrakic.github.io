general:
#  branches:
#    only:
#    - master # list of branches to build
#    - /feature-.*/ # or regexes

machine:
  environment:
    NOKOGIRI_USE_SYSTEM_LIBRARIES: true # speeds up installation of html-proofer
    USER_NAME: atrakic
    USER_EMAIL: <your-github-email>
  services:
    - docker
#  ruby:
#    version: 2.4.0

dependencies:
  pre:
    - ./bin/setup
  override:
    - docker info
    - docker build --rm=false -t xomodo/atrakic.github.io .

test:
  post:
    - bundle exec jekyll build --incremental
    - bundle exec htmlproofer ./_site --only-4xx --allow-hash-href #--assume-extension --check-opengraph

#deployment:
#  hub:
#    branch: master
#    commands:
#      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
#      - docker push xomodo/atrakic.github.io
